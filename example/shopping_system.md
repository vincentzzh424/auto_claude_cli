## Task
通过gemini 生成完整的项目需求如下

```bash
1. 项目背景与目标
核心痛点： 头部 Up 主流量分散（B站、抖音、小红书、微信），变现渠道割裂（淘宝店、微店、私域）。缺乏统一的库存管理、跨平台订单聚合、以及针对粉丝的高级会员运 营工具。 核心目标： 打造一个‘超级中台”，让 Up 主在一个后台管理全网生意，实现‘流量在全网，成交在私域/全域，管理在统一后台”。

2. 系统整体架构 (System Architecture)
系统采 用 微服务架构 (Microservices)，分为三大层级：

渠道接入层 (Channel Layer): 微信小程序、H5 个人站、支付宝小程序、第三方平台（淘宝/天猫/小红书/抖音 Open API 对接）。

业务中台层 (Business Core): 订单中心、商品中心、会员中心、营销中心、结算中心。

基础服务层 (Infrastructure): 打印服务、消息队列、数据仓库、文件服务。

3. 详细功能模块 (Functional Requirements)
3.1 核心业务中台 (Merchant Admin - 后台运营)
这是工作量最大的部分，需要处理复杂的逻辑和并发。

A. 全渠道商品中心 (PIM)
SKU 统一管理： 支持实物商品、虚拟商品（课程/激活码/会员权益）。

多渠道定价： 同一 SKU，在小程序、淘宝、小红书可设置不同价格策略。

库存共享与锁定： * 实现‘一盘货卖全网”。淘宝卖出一件，小程序 库存自动减一。

支持‘活动锁库存”（为直播预留库存）。

素材库： 统一管理商品详情页、短视频素材，一键分发到个人站。

B. 订单聚合中心 (OMS) - 技术难点
全平台抓单：

自营： 微信/支付宝小程序订单。

第三方同步： 对接淘宝 Open Platform (TOP)、小红书 ARK、抖音抖店 API，自动拉取订单。

异常处理： 针对 API 限制，设计高可用队列，防止漏单。

智能拆单/合单： 同一用户跨平台下单，系统识别收货信息自动合并发货（节省运费）。

订单状态机： 统一全平台的订单状态流转（待支付、待发货、已发货、售后中）。

C. 智能仓储与发货 (WMS & Logistics)
电子面单自动打印： 对接菜鸟打印组件或快递鸟/快递100 API。

支持自定义面单模板（如印上 Up 主的 Logo/骚话）。

 批量打印（每分钟处理 500+ 单）。

物流路由： 系统自动根据收货地址和包裹重量，计算成本最低的快递公司（如：江浙沪发圆通，偏远发邮政）。

发货回填： 在后台点击发货后，自动 调用淘宝/小红书接口，回填物流单号，改变平台订单状态。

D. 统一客服工作台 (Unified CS)
全渠道聚合： 将微信客服、淘宝旺旺（需特殊处理）、站内信聚合到一个聊天窗口。

AI 辅助： 接入大模型，基于知识库（发货时间、尺码表）自动回复 70% 的常见问题。

工单系统： 复杂售后问题转工单，流转给供应链处理。

3.2 创作者个人前台 (Creator Frontend)
此部分重点在于高度自定义和品牌化。

A. 个人品牌独立站 (Personal Website/H5)
拖拽式装修 (CMS)： 类似 Shopify，Up 主可拖拽组件（轮播图、视频流、商品卡片）搭建个性化主页。

内容电商融合： 支持‘看视频弹商品”，在个人博客/动态中直接插入购买链接。

B. 多端小程序 (Mini Programs)
微信/支付宝双端： * 一键授权登录。

直播间悬浮窗购 买。

微信订阅消息推送（开播提醒、发货提醒）。

3.3 高级会员与粉丝运营 (CRM)
全域会员通： 识别同一个粉丝在 B 站、淘宝、微信的身份（基于手机号 Mapping）。

付费会员体系： 类似‘舰长”机制。购买年卡可享受全场 9 折、专属客服、优先发货。

积分商城： 粉丝在淘宝消费、在 B 站互动均可产生积分，积分可在独立站兑换周边。

私域引流： 淘宝下单后，自动发送短信/卡片引导加企业微信。

3.4 财务与分账 (Finance)
多渠道对账： 自动拉取支付宝、微信支付、淘宝账单进行核对。

自动分账系统： 如果是联名商品， 系统支持按比例自动分账给合作方/设计师。

4. 非功能性需求 (Technical Challenges)
高并发 (High Concurrency)：

场景：Up 主直播带货时，瞬间流量（QPS）可能达到平时的 100 倍。

要求：秒杀系统需独立部署，使用 Redis 集群抗压，RabbitMQ 削峰填谷。

数据一致性 (Data Consistency)：

场景：淘宝和微信同时拍下最后一件库存。

要求：使用分布式锁 (Redisson)，保证库存绝对不超卖。

安全性 (Security)：

数据脱敏：订单导出时，手机号/地址必须加密/脱敏，防止粉丝隐私泄露。

DDOS 防护：防止黑粉攻击服务器。
```

## 实现效果
** [产品文档](shopping_system/PRD.md)
** [核心数据实体设计](shopping_system/DATA_FLOW.md)